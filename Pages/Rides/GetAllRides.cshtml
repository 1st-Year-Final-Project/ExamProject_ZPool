@page
@using ZPool.Models
@using ZPool.Pages.Rides
@model ZPool.Pages.Rides.GetAllRidesModel
@{
    ViewData["Title"] = "GetAllRides";

    Ride ride = Model.Rides.ToList()[0];
}

<div>
    <a asp-page="CreateRide"> Create a Ride</a>
</div>


<div>
    <a asp-page="EditRide"> Edit a Ride</a>
</div>

<div>
    <a asp-page="DeleteRide"> Delete a Ride</a>
</div>


<h4 style="color:black"> List of Rides</h4>

<!-- Search box -->
<div class="container">
    <div class="row mb-2 bg-light">
        <div class="col my-2 py-1 d-flex justify-content-center">

            <form class="form-inline">
                <div class="form-group">
                    <label class="mx-2"></label>
                    <input type="text" asp-for="@Model.RideCriteria.DepartureLocation" class="form-control rounded-border" style="max-width: 13rem" placeholder="From where?"/>
                </div>
                <div class="form-group">
                    <label class="mx-2"></label>
                    <input type="text" asp-for="@Model.RideCriteria.DestinationLocation" class="form-control rounded-border" style="max-width: 13rem" placeholder="Where to?"/>
                </div>
                <div class="form-group">
                    <label class="mx-2">Date: </label>
                    <input asp-for="@Model.RideCriteria.StartTime"  asp-format="{0:yyyy-MM-ddTHH:mm}" class="form-control rounded-border" style="max-width: 13rem"/>
                </div>
                <button type="submit" class="btn btn-yellow mx-2">Search ride</button>
                <a asp-page="GetAllRides" class="btn btn-outline-dark mx-2 rounded-border">Clear Filter</a>
            </form>

        </div>
    </div>
</div>
<!-- Search box end -->


<div class="container w-75 rounded-border" style="box-shadow: 2px 2px 3px 1px #dedede">
    <a asp-page="Ride" asp-route-id="@ride.RideID" style="text-decoration: none" class="text-dark">
        <div class="row rounded-border" style="border: solid 1px #CECECE">
            <div class="col col-md-8 p-3">
                <h5 class="ml-3">@ride.StartTime.ToString("dddd, dd.MM.yyyy HH:mm")</h5>
                <ul class="list-unstyled ml-3">
                    <li class="h6 mb-0 align-middle">@ride.DepartureLocation</li>
                    <li class="align-middle pl-4 py-2"><img src="/images/icons/arrow_down_24dp.svg" />
                    <li class="h6 mb-0 align-middle">@ride.DestinationLocation</li>
                </ul>
            </div>
            <div class="col-1"></div>
            <div class="col col-md-3 p-3 text-dark" style="border-left: solid 1px;">
                <div class="text-center text-dark">
                    <h4>@ride.Car.AppUser.UserName</h4>
                    <hr/>
                    <h5>Available seats:</h5>
                    <h1>
                        @ride.SeatsAvailable
                    </h1>
                    <div class="mt-5">
                    </div>
                </div>
            </div>

        </div>
    </a>
</div>

<div style="height: 40px"></div>


@if (@Model.Rides.Count() > 0)
{


    <table class="table">
        <thead>
        <tr>
            <th> RideID </th>
            <th> StartTime </th>
            <th> DepartureLocation</th>
            <th> DestinationLocation </th>
            <th> SeatsAvailable</th>
            <th> CarID</th>
        </tr>
        </thead>
        <tbody>

        @foreach (var item in Model.Rides)
        {
            <tr>
                <td> @item.RideID</td>
                <td> @item.StartTime </td>
                <td> @item.DepartureLocation </td>
                <td> @item.DestinationLocation </td>
                <td> @item.SeatsAvailable </td>
                <td> @item.CarID </td>
                <td>
                    <a asp-page="Ride" asp-route-id="@item.RideID">Details</a>|
                    <a asp-page="EditRide" asp-route-id="@item.RideID">Edit</a>|
                    <a asp-page="DeleteRide" asp-route-id="@item.RideID">Delete</a> |
                </td>
            </tr>
        }

    </table>
}
else
{
    <div class="w-100 text-center mt-5">
        <h5>@Model.ScreenMessage</h5>
    </div>
}

<div>
    <a asp-page="Index">Back to List</a>
</div>
